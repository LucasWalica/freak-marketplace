<div class="space-y-4">
  <div
    (click)="triggerFileSelect()"
    (dragover)="onDragOver($event)"
    (dragleave)="onDragLeave($event)"
    (drop)="onDrop($event)"
    [ngClass]="{
      'border-indigo-500 bg-indigo-50': isDragging,
      'border-gray-300 hover:border-indigo-400': !isDragging
    }"
    class="relative group cursor-pointer border-2 border-dashed rounded-xl p-8 transition-all flex flex-col items-center justify-center"
    *ngIf="canAddMore"
  >
    <div class="bg-indigo-100 p-3 rounded-full text-indigo-600 group-hover:scale-110 transition-transform">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
      </svg>
    </div>
    <p class="mt-4 text-sm font-medium text-gray-900">{{ uploadButtonText }}</p>
    <p class="text-xs text-gray-500 mt-1">PNG, JPG o WebP hasta 10MB</p>
    <input type="file" class="hidden-input hidden" multiple accept="image/*" (change)="onFileSelect($event)">
  </div>

  <div *ngIf="uploadErrors.length > 0" class="p-3 bg-red-50 border border-red-200 rounded-lg">
    <p *ngFor="let error of uploadErrors" class="text-xs text-red-600 font-medium">â€¢ {{ error }}</p>
  </div>

  <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4" *ngIf="hasImages">
    <div *ngFor="let url of previewUrls; let i = index" class="relative group aspect-square rounded-lg overflow-hidden border border-gray-200 bg-gray-100">
      <img [src]="url" class="w-full h-full object-cover">
      
      <button 
        (click)="removeImage(i); $event.stopPropagation()"
        class="absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity shadow-lg"
      >
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
        </svg>
      </button>
    </div>
  </div>
</div>